"use strict";function _createForOfIteratorHelper(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,c=!0,a=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return c=e.done,e},e:function(e){a=!0,n=e},f:function(){try{c||null==s.return||s.return()}finally{if(a)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,o=new Array(t);s<t;s++)o[s]=e[s];return o}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){_defineProperty(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var BishopMoves=function(e,t,s){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:9,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=e.rowNumber,a=e.colNumber,r=(e.colLetter,e.piece,range(o,i,n)),l=[1,-1],u=r.map((function(e){return[e,l[0]*e]})),h=r.map((function(e){return[e,l[1]*e]}));u=removeOutOfBoundsPossibleMoves(u,c,a,s),h=removeOutOfBoundsPossibleMoves(h,c,a,s);var p=splitPossibleMoves(u,e),m=filterPossibleMoves(p[0],t,e),d=filterPossibleMoves(p[1],t,e),g=splitPossibleMoves(h,e),v=filterPossibleMoves(g[0],t,e),f=filterPossibleMoves(g[1],t,e),b=m.possibleMoves.concat(d.possibleMoves).concat(v.possibleMoves).concat(f.possibleMoves),k=m.possibleTargets.concat(d.possibleTargets).concat(v.possibleTargets).concat(f.possibleTargets);return{possibleMoves:b,possibleTargets:k}},range=function(e,t,s){if(void 0===t&&(t=e,e=0),void 0===s&&(s=1),s>0&&e>=t||s<0&&e<=t)return[];for(var o=[],i=e;s>0?i<t:i>t;i+=s)o.push(i);return o},removeOutOfBoundsPossibleMoves=function(e,t,s,o){return e.map((function(e){var i=e[1]+t;return i<=8&i>0?o[e[0]+s-1]+i:null})).filter(Boolean)},splitPossibleMoves=function(e,t){var s=e.indexOf(t.colLetter+t.rowNumber),o=e.slice(0,s);return[o=o.reverse(),e.slice(s+1)]},filterPossibleMoves=function(e,t,s){var o=[],i=[],n=!0;return e.forEach((function(e){1==n&&(null==t[e].piece?o.push(e):t[e].piece.kingdom!=s.piece.kingdom?(i.push(e),n=!1):n=!1)})),{possibleMoves:o,possibleTargets:i}},KingMoves=function(e,t,s){var o=BishopMoves(e,t,s,-1,2),i=RookMoves(e,t,s,-1,2);return{possibleMoves:o.possibleMoves.concat(i.possibleMoves),possibleTargets:o.possibleTargets.concat(i.possibleTargets)}},InitialChessPieceData=function(){this.data={blackPawn:{location:["a7","b7","c7","d7","e7","f7","g7","h7"],htmlcode:"&#9823;",kingdom:"black",position:"pawn",img:"./assets/img/bP.png"},blackKing:{location:"e8",htmlcode:"&#9818;",kingdom:"black",position:"king",img:"./assets/img/bK.png"},blackQueen:{location:"d8",htmlcode:"&#9819;",kingdom:"black",position:"queen",img:"./assets/img/bQ.png"},blackBishop:{location:["c8","f8"],htmlcode:"&#9821;",kingdom:"black",position:"bishop",img:"./assets/img/bB.png"},blackKnight:{location:["b8","g8"],htmlcode:"&#9822;",kingdom:"black",position:"knight",img:"./assets/img/bN.png"},blackRook:{location:["a8","h8"],htmlcode:"&#9820;",kingdom:"black",position:"rook",img:"./assets/img/bR.png"},whitePawn:{location:["a2","b2","c2","d2","e2","f2","g2","h2"],htmlcode:"&#9817;",kingdom:"white",position:"pawn",img:"./assets/img/wP.png"},whiteKing:{location:"e1",htmlcode:"&#9812;",kingdom:"white",position:"king",img:"./assets/img/wK.png"},whiteQueen:{location:"d1",htmlcode:"&#9813;",kingdom:"white",position:"queen",img:"./assets/img/wQ.png"},whiteBishop:{location:["c1","f1"],htmlcode:"&#9815;",kingdom:"white",position:"bishop",img:"./assets/img/wB.png"},whiteKnight:{location:["b1","g1"],htmlcode:"&#9816;",kingdom:"white",position:"knight",img:"./assets/img/wN.png"},whiteRook:{location:["a1","h1"],htmlcode:"&#9814;",kingdom:"white",position:"rook",img:"./assets/img/wR.png"}}},KnightMoves=function(e,t,s){var o=e.rowNumber,i=e.colNumber,n=(e.colLetter,e.piece),c=removeOutOfBoundsPossibleMoves([[2,1],[2,-1],[1,-2],[-1,-2],[-2,-1],[-2,1],[-1,2],[1,2]],o,i,s),a=[],r=[];return c.forEach((function(e){null==t[e].piece?a.push(e):t[e].piece.kingdom!=n.kingdom&&r.push(e)})),{possibleMoves:a,possibleTargets:r}},ChessGamePlayState=function(){this.data={active_chess_player:"white",active_chess_box_id:null,chess_obj:[],active_chess_obj:null,pawn_double_step_status:null,letters:["a","b","c","d","e","f","g","h"],king_location:{white:null,black:null},castling:{white:{king_side:{king_move:"g1",rook_move:"f1",rook:{status:!1,location:"h1"},space_empty:{status:!1,location:["f1","g1"]},space_attacked:{status:!1,location:["f1","g1"]}},queen_side:{king_move:"c1",rook_move:"d1",rook:{status:!1,location:"a1"},space_empty:{status:!1,location:["c1","d1"]},space_attacked:{status:!1,location:["c1","d1"]}}},black:{king_side:{king_move:"g8",rook_move:"f8",rook:{status:!1,location:"h8"},space_empty:{status:!1,location:["f8","g8"]},space_attacked:{status:!1,location:["f8","g8"]}},queen_side:{king_move:"c8",rook_move:"d8",rook:{status:!1,location:"a8"},space_empty:{status:!1,location:["c8","d8"]},space_attacked:{status:!1,location:["c8","d8"]}}}},checked:{white:null,black:null},checkmate:{white:!1,black:!1},winner:null,players:{white:{name:"Player 1",remaining_time:30},black:{name:"Player 2",remaining_time:30}}}},GetPossibleMoves=function(e,t,s,o){switch(e.piece.position){case"pawn":return PawnMoves(e,t,s,o);case"knight":return KnightMoves(e,t,o);case"rook":return RookMoves(e,t,o);case"bishop":return BishopMoves(e,t,o);case"queen":return QueenMoves(e,t,o);case"king":return KingMoves(e,t,o);default:return null}},Castling=function(e,t,s){var o=s.active_chess_obj,i=s.active_chess_player;if("king"==e.piece.position&t){console.log("Castling!");var n="white"==i?"1":"8";if("g"==e.colLetter){var c="h"+n;o["f"+n].piece=o[c].piece,o[c].piece=null,setInnerImg(c,""),setInnerImg("f"+n,o["f"+n].piece.img)}else{var a="a"+n;o["d"+n].piece=o[a].piece,o[a].piece=null,setInnerImg(a,""),setInnerImg("d"+n,o["d"+n].piece.img)}toggleAlert("Castling!")}},CheckCastling=function(e){var t=e.active_chess_box_id,s=e.active_chess_player,o=e.active_chess_obj,i=e.castling,n=e.checked;if("king"==o[t].piece.position&&null!=i[s]&&(CheckIfChecked(e,null),null==n[s])){var c=i[s],a=c.king_side,r=c.queen_side;checkKingQueenSide(a,o,e),checkKingQueenSide(r,o,e)}},checkKingQueenSide=function(e,t,s){0==e.rook.status&&(checkEmptyBoxes(e.space_empty,t),1==e.space_empty.status&&(checkIfBoxesBeingChecked(e,s),0==e.space_attacked.status&&document.getElementById(e.king_move).classList.add("castling")))},checkEmptyBoxes=function(e,t){var s=[];e.location.forEach((function(e){t[e].piece?s.push(!1):s.push(!0)})),e.status=s[0]&s[1]},checkIfBoxesBeingChecked=function(e,t){var s=t.active_chess_obj,o=t.king_location,i=t.active_chess_player,n=e.space_attacked.location,c=JSON.parse(JSON.stringify(s)),a=s[o[i]].piece;c[n[0]].piece=a,c[n[1]].piece=a;var r=[];n.forEach((function(e){r.push(getCheckers(e,c,t))})),r=[].concat.apply([],r),e.space_attacked.status=r.length>0},PawnMoves=function(e,t,s,o){var i=[],n=e.rowNumber,c=e.colNumber,a=e.colLetter,r=e.piece;if("white"==r.kingdom)if(2==n)for(var l=n+1;l<n+3;l++)i.push(l);else for(var u=n+1;u<n+2;u++)i.push(u);else if(7==n)for(var h=n-1;h>n-3;h--)i.push(h);else for(var p=n-1;p>n-2;p--)i.push(p);i=(i=i.filter((function(e){return e<=8}))).map((function(e){return a+e}));var m=!0;i=i.map((function(e){return null==t[e].piece&1==m?e:(m=!1,null)})).filter(Boolean);var d=[1,-1],g=[1,-1],v=[];for(var f in g)for(var b in d){var k=g[f]*d[b];v.push([d[b],k])}return{possibleMoves:i,possibleTargets:v=(v=(v=v.map((function(e){return[e[0]+c,e[1]+n]}))).map((function(e){return"white"==r.kingdom?e[1]>n?o[e[0]-1]+e[1]:null:e[1]<n?o[e[0]-1]+e[1]:null})).filter(Boolean)).map((function(e){return null!=t[e].piece?t[e].piece.kingdom==r.kingdom?null:e:s&&s.colNumber-(o.indexOf(e[0])+1)==0&&s.rowNumber-n==0?s.piece.kingdom==r.kingdom?null:e:null})).filter(Boolean)}},scanCheckers=function(e,t,s){if(e.length>0){var o=[];return e.forEach((function(e){t[e].piece.position==s&&o.push(t[e])})),o.length>0?o:null}return null},getCheckers=function(e,t,s){var o=s.pawn_double_step_status,i=s.letters,n=t[e],c=QueenMoves(n,t,i),a=RookMoves(n,t,i),r=BishopMoves(n,t,i),l=KnightMoves(n,t,i),u=KingMoves(n,t,i),h=PawnMoves(n,t,o,i),p=[scanCheckers(c.possibleTargets,t,"queen"),scanCheckers(a.possibleTargets,t,"rook"),scanCheckers(r.possibleTargets,t,"bishop"),scanCheckers(l.possibleTargets,t,"knight"),scanCheckers(u.possibleTargets,t,"king"),scanCheckers(h.possibleTargets,t,"pawn")].filter(Boolean);return p=[].concat.apply([],p)},CheckIfChecked=function(e,t){var s,o=e.active_chess_player,i=e.active_chess_obj,n=e.king_location;["white","black"].forEach((function(t){var o=document.getElementsByClassName("checked-"+t);if(Object.keys(o).forEach((function(e){o[0].classList.remove("checked-"+t)})),(s=getCheckers(n[t],i,e)).length>0)e.checked[t]=s,document.getElementById(n[t]).classList.add("checked-"+t);else{e.checked[t]=null;var c=document.getElementsByClassName("checked-"+t);Object.keys(c).forEach((function(e){c[0].classList.remove("checked-"+t)}))}})),Boolean(e.checked.white)|Boolean(e.checked.black)&&(toggleAlert("Checked!"),console.log("Checkers!",e.checked),console.log("Checkers",s),console.log("being checked",e.checked,e.active_chess_player));var c=Boolean(e.checked.white)?"white":Boolean(e.checked.black)?"black":null;null!=c&null!=t&&c!=o&&(console.log("Last move was illegal! King is being checked."),toggleAlert("Move was Illegal!"),t())},CheckAreaIfChecked=function(e,t,s){var o=s.active_chess_player,i=s.active_chess_obj,n=s.letters;if("king"==i[e].piece.position){var c=KingMoves(i[e],i,n),a=c.possibleMoves.concat(c.possibleTargets),r=JSON.parse(JSON.stringify(i)),l={};a.forEach((function(t){r[t].piece=i[e].piece,l[t]=getCheckers(t,r,s)}));var u=[],h=[];if(Object.keys(l).forEach((function(e){l[e].length>0?h.push(e):u.push(e)})),0==u.length)s.checkmate[o]=!0,s.winner="white"==o?"black":"white",console.log("Checkmate",s.checkmate[o]),console.log("Winner",s.winner);else if(h.includes(t))return}},QueenMoves=function(e,t,s){var o=BishopMoves(e,t,s),i=RookMoves(e,t,s);return{possibleMoves:o.possibleMoves.concat(i.possibleMoves),possibleTargets:o.possibleTargets.concat(i.possibleTargets)}},EnPassant=function(e,t,s){var o=e.active_chess_obj,i=e.pawn_double_step_status;if(Boolean(i)&"pawn"==t.piece.position&&t.colNumber-i.colNumber==0&&i.rowNumber-s.rowNumber==0){var n=i.colLetter+i.rowNumber;o[n].piece=null,setInnerImg(n,""),toggleAlert("En Passant!"),console.log("En Passant!")}e.active_chess_obj=o},UpdateEnPassantState=function(e,t,s){"pawn"==t.piece.position&&2==Math.abs(t.rowNumber-s.rowNumber)?e.pawn_double_step_status=_objectSpread({},t):e.pawn_double_step_status=null},RookMoves=function(e,t,s){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:9,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=e.rowNumber,a=e.colNumber,r=(e.colLetter,e.piece,range(o,i,n)),l=r.map((function(e){return[e,0]})),u=range(o,i,n),h=u.map((function(e){return[0,e]})),p=removeOutOfBoundsPossibleMoves(l,c,a,s),m=removeOutOfBoundsPossibleMoves(h,c,a,s),d=splitPossibleMoves(p,e),g=filterPossibleMoves(d[0],t,e),v=filterPossibleMoves(d[1],t,e),f=splitPossibleMoves(m,e),b=filterPossibleMoves(f[0],t,e),k=filterPossibleMoves(f[1],t,e),y=g.possibleMoves.concat(v.possibleMoves).concat(b.possibleMoves).concat(k.possibleMoves),_=g.possibleTargets.concat(v.possibleTargets).concat(b.possibleTargets).concat(k.possibleTargets);return{possibleMoves:y,possibleTargets:_}},PawnPromotion=function(e,t,s){"pawn"==t.piece.position&&(8==t.rowNumber&"white"==s&&(t.piece={htmlcode:"&#9813;",kingdom:"white",position:"queen"},setInnerHtml(e,t.piece.htmlcode),toggleAlert("Pawn Promoted!")),1==t.rowNumber&"black"==s&&(t.piece={htmlcode:"&#9819;",kingdom:"black",position:"queen"},setInnerHtml(e,t.piece.htmlcode),toggleAlert("Pawn Promoted!")))},SetActivePlayer=function(e){document.getElementById("activePlayer").innerHTML=e[0].toUpperCase()+e.slice(1)+"'s Turn"},ToggleActivePlayer=function(e){"white"==e.active_chess_player?e.active_chess_player="black":e.active_chess_player="white",SetActivePlayer(e.active_chess_player)},getClassListIncludes=function(e,t){return document.getElementById(e).classList.value.includes(t)},setInnerHtml=function(e,t){document.getElementById(e).children[0].innerHTML=t},setInnerImg=function(e,t){document.getElementById(e).children[0].setAttribute("src",t)};function ChessGame(){this.chessObj,this.app=document.getElementById("app"),this.DrawChessTiles=function(){for(var e={},t=["a","b","c","d","e","f","g","h"],s=8;s>0;s--){var o=void 0;o=s%2==0;for(var i=1;i<9;i++){var n=void 0;1==o?(n="white",o=!1):(n="black",o=!0);var c=t[i-1]+s,a=document.createElement("div");a.setAttribute("class","chess-box "+n+" "+c),a.setAttribute("id",c),this.app.appendChild(a),e[c]={rowNumber:s,colLetter:t[i-1],colNumber:i,piece:null}}}this.chessObj=e},this.SetChessPieces=function(e,t){var s=Object.keys(e);for(var o in s){var i=e[s[o]],n=i.location,c=i.htmlcode,a=i.kingdom,r=i.position,l=i.img;if("object"==_typeof(n))for(var u in n)this.chessObj[n[u]].piece={htmlcode:c,kingdom:a,position:r,img:l};else this.chessObj[n].piece={htmlcode:c,kingdom:a,position:r,img:l},"king"==r&&(t.king_location[a]=this.chessObj[n].colLetter+this.chessObj[n].rowNumber)}},this.DrawChessPieces=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=Object.keys(e);for(var o in s){var i=document.getElementById(s[o]),n=document.createElement("img");n.setAttribute("class","chess-piece"),n.setAttribute("src",null!=e[s[o]].piece?e[s[o]].piece.img:""),1==t?i.appendChild(n):i.replaceChild(n,i.children[0])}},this.UndrawChessPieces=function(){var e=Object.keys(this.chessObj);for(var t in e){var s=document.getElementById(e[t]);s.removeChild(s.childNodes[0])}},this.AddClassesOfMovesOrTargetsSquares=function(e,t){e.forEach((function(e){document.getElementById(e).classList.add("possible-move")})),t.forEach((function(e){document.getElementById(e).classList.add("possible-target")}))},this.RemoveClassesOfMovesOrTargetsSquares=function(){this.selected=document.querySelectorAll(".selected"),this.possibleMoves=document.querySelectorAll(".possible-move"),this.possibleTargets=document.querySelectorAll(".possible-target"),this.castles=document.querySelectorAll(".castling");var e,t=_createForOfIteratorHelper(this.selected);try{for(t.s();!(e=t.n()).done;){e.value.classList.remove("selected")}}catch(e){t.e(e)}finally{t.f()}var s,o=_createForOfIteratorHelper(this.possibleMoves);try{for(o.s();!(s=o.n()).done;){s.value.classList.remove("possible-move")}}catch(e){o.e(e)}finally{o.f()}var i,n=_createForOfIteratorHelper(this.possibleTargets);try{for(n.s();!(i=n.n()).done;){i.value.classList.remove("possible-target")}}catch(e){n.e(e)}finally{n.f()}var c,a=_createForOfIteratorHelper(this.castles);try{for(a.s();!(c=a.n()).done;){c.value.classList.remove("castling")}}catch(e){a.e(e)}finally{a.f()}}}var Application=function(){this.chessGame=new ChessGame,this.chessData=new InitialChessPieceData,this.btnUndo=document.getElementById("undo"),this.chessBoxIds,this.dotSlide=Array.from(document.querySelectorAll(".dot")),this.initializeState=function(){var e=new ChessGamePlayState;this.state=e.data},this.InitializeChessMap=function(){this.initializeState();var e=this.state,t=e.active_chess_player;e.active_chess_obj;SetActivePlayer(t),this.chessGame.DrawChessTiles(),this.chessGame.SetChessPieces(this.chessData.data,this.state),this.chessGame.DrawChessPieces(this.chessGame.chessObj),this.state.chess_obj=[JSON.parse(JSON.stringify(this.chessGame.chessObj))],this.state.active_chess_obj=this.chessGame.chessObj;var s=Object.keys(this.state.chess_obj[0]);this.chessBoxIds=s.map((function(e,t){return document.getElementById(e)}))},this.ReInitializeChessMap=function(){this.chessGame.UndrawChessPieces(),this.InitializeChessMap()},this.ToggleActivePiece=function(e){var t=this.state,s=t.active_chess_obj,o=t.active_chess_player,i=t.pawn_double_step_status,n=t.letters;if(null!=s[e].piece&&s[e].piece.kingdom==o){var c=document.getElementById(e).classList;if(c.value.includes("selected"))this.chessGame.RemoveClassesOfMovesOrTargetsSquares(),this.state.active_chess_box_id=e;else{this.chessGame.RemoveClassesOfMovesOrTargetsSquares(),c.add("selected");var a=GetPossibleMoves(s[e],s,i,n),r=a.possibleMoves,l=a.possibleTargets;this.chessGame.AddClassesOfMovesOrTargetsSquares(r,l),this.state.active_chess_box_id=e,CheckCastling(this.state)}}},this.PossibleMoveSelected=function(e){var t=this,s=this.state,o=s.active_chess_box_id,i=s.active_chess_player,n=s.active_chess_obj,c=s.chess_obj,a=s.castling,r=s.king_location,l=o,u=e,h=n[u],p=n[l],m=getClassListIncludes(u,"possible-move"),d=getClassListIncludes(u,"possible-target"),g=getClassListIncludes(u,"castling");if(m|d|g){if(CheckAreaIfChecked(l,u,this.state),h.piece=p.piece,p.piece=null,setInnerImg(l,""),setInnerImg(u,h.piece.img),Castling(h,g,this.state),EnPassant(this.state,h,p),UpdateEnPassantState(this.state,h,p),PawnPromotion(u,h,i),c.push(JSON.parse(JSON.stringify(n))),ToggleActivePlayer(this.state),this.chessGame.RemoveClassesOfMovesOrTargetsSquares(),this.state.chess_obj=c,"king"==h.piece.position&&(a[h.piece.kingdom]=null,r[h.piece.kingdom]=u),"rook"==h.piece.position&&null!=a[h.piece.kingdom]){var v="h"==p.colLetter?"king_side":"queen_side";a[h.piece.kingdom][v].rook.status=!0}this.state.castling=a,this.state.king_location=r,CheckIfChecked(this.state,(function(){t.UndoMove(t.state)}))}},this.UndoMove=function(e){var t=e.active_chess_obj,s=e.chess_obj;s.length<=1||(t=JSON.parse(JSON.stringify(s[s.length-2])),s.pop(),this.chessGame.RemoveClassesOfMovesOrTargetsSquares(),this.chessGame.DrawChessPieces(t,!1),ToggleActivePlayer(e),e.active_chess_obj=t,e.chess_obj=s,this.findKing(),CheckIfChecked(e,null))},this.findKing=function(){var e=this,t=this.state.active_chess_obj;Object.keys(t).forEach((function(s){var o=t[s];o.piece&&"king"==o.piece.position&&(e.state.king_location[o.piece.kingdom]=o.colLetter+o.rowNumber)}))}},toggleAlert=function(e){var t=document.getElementById("alertModal");document.getElementById("alertModalContent").innerHTML="<h1>".concat(e,"</h1>"),t.style.display="flex",setTimeout((function(){t.style.display="none"}),1e3)};function welcomeModal(e){var t=document.getElementById("welcomeModal"),s=document.getElementById("start"),o=document.getElementById("playerRowId"),i=document.getElementById("playerTurnId"),n=document.getElementById("undo");s.onclick=function(s){s.preventDefault();var c=document.getElementById("p1Name").value,a=document.getElementById("p2Name").value;if(""!=c&""!=a){c===a&&alert("Player names must be unique."),e.players.white.name=c,e.players.black.name=a,t.style.display="none";var r=document.getElementById("player-1").children[0],l=document.getElementById("player-2").children[0];r.innerText=e.players.white.name,l.innerText=e.players.black.name,o.classList.toggle("hidden"),i.classList.toggle("hidden"),n.classList.toggle("hidden"),countDownTimer(e)}else alert("input missing")}}function convertTimerToTime(e){return{days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:"0"+Math.floor(e%36e5/6e4),seconds:"0"+Math.floor(e%6e4/1e3)}}function updateGameTime(e,t){var s=convertTimerToTime(e),o=s.minutes,i=s.seconds;document.getElementById(t).innerText=o.slice(-2)+" : "+i.slice(-2)}function countDownTimer(e){var t=36e5,s=1e3;e.players.white.remaining_time=t/2,e.players.black.remaining_time=t/2,updateGameTime(e.players.white.remaining_time,"p1time"),updateGameTime(e.players.black.remaining_time,"p2time");setInterval((function(){updateGameTime(t,"time"),t-=s;var o=e.players[e.active_chess_player].remaining_time;updateGameTime(o,"white"==e.active_chess_player?"p1time":"p2time"),e.players[e.active_chess_player].remaining_time=o-s}),s)}function currentSlide(e){showSlides(slideIndex=e)}var slideIndex=1;function showSlides(e){var t,s=document.getElementsByClassName("mySlides"),o=document.getElementsByClassName("dot");for(e>s.length&&(slideIndex=1),e<1&&(slideIndex=s.length),t=0;t<s.length;t++)s[t].style.display="none";for(t=0;t<o.length;t++)o[t].className=o[t].className.replace(" active","");s[slideIndex-1].style.display="block",o[slideIndex-1].className+=" active"}var App=new Application;App.InitializeChessMap(),App.chessBoxIds.forEach((function(e){e.onclick=function(){return[App.ToggleActivePiece(e.id),App.PossibleMoveSelected(e.id)]}})),App.btnUndo.onclick=function(){return[toggleAlert("Undo!"),rotateUndo(),App.UndoMove(App.state)]},welcomeModal(App.state),App.dotSlide.forEach((function(e,t){e.onclick=function(){return currentSlide(t+1)}})),showSlides();var rotateUndo=function(){document.getElementById("undo").classList.toggle("syncRotate"),setTimeout((function(){document.getElementById("undo").classList.toggle("syncRotate")}),1500)};
//# sourceMappingURL=index.min.js.map
